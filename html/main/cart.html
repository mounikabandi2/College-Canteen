<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Cart - College Canteen</title>
    <link rel="stylesheet" href="../../css/design-system.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .cart-header {
            padding: 120px 0 60px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .cart-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=1200&h=400&fit=crop&crop=center') center/cover;
            opacity: 0.2;
            filter: blur(2px);
        }
        
        .cart-header-content {
            position: relative;
            z-index: 1;
            text-align: center;
            color: var(--text);
        }
        
        .cart-title {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 700;
            margin-bottom: var(--space-4);
        }
        
        .cart-subtitle {
            font-size: var(--text-lg);
            opacity: 0.9;
        }
        
        .cart-content {
            padding: var(--space-16) 0;
            min-height: 60vh;
        }
        
        .cart-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-12);
            align-items: start;
        }
        
        .cart-items-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
        }
        
        .cart-items-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--border);
        }
        
        .items-count {
            color: var(--text-muted);
            font-size: var(--text-sm);
        }
        
        .clear-cart-btn {
            background: none;
            border: 1px solid var(--error);
            color: var(--error);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: var(--text-sm);
            transition: all var(--transition-fast);
        }
        
        .clear-cart-btn:hover {
            background: var(--error);
            color: var(--text);
        }
        
        .cart-items {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }
        
        .cart-item {
            display: grid;
            grid-template-columns: 80px 1fr auto auto;
            gap: var(--space-4);
            align-items: center;
            padding: var(--space-4);
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            transition: all var(--transition-fast);
        }
        
        .cart-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .item-image {
            width: 80px;
            height: 80px;
            background-size: cover;
            background-position: center;
            border-radius: var(--radius-lg);
            border: 2px solid var(--border);
        }
        
        .item-details h3 {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-1);
        }
        
        .item-details p {
            color: var(--text-muted);
            font-size: var(--text-sm);
            margin: 0;
        }
        
        .item-price {
            font-size: var(--text-lg);
            font-weight: 700;
            color: var(--primary);
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-1);
        }
        
        .quantity-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: none;
            color: var(--primary);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            font-weight: 600;
        }
        
        .quantity-btn:hover {
            background: var(--primary);
            color: var(--text);
        }
        
        .quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
            color: var(--text);
        }
        
        .remove-btn {
            background: none;
            border: none;
            color: var(--error);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }
        
        .remove-btn:hover {
            background: var(--error);
            color: var(--text);
        }
        
        .empty-cart {
            text-align: center;
            padding: var(--space-16) var(--space-8);
            color: var(--text-muted);
        }
        
        .empty-cart i {
            font-size: 4rem;
            margin-bottom: var(--space-6);
            color: var(--text-dim);
        }
        
        .empty-cart h3 {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-4);
            color: var(--text);
        }
        
        .cart-summary {
            position: sticky;
            top: 120px;
        }
        
        .summary-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-lg);
        }
        
        .summary-header {
            text-align: center;
            margin-bottom: var(--space-6);
        }
        
        .summary-title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-2);
        }
        
        .summary-items {
            margin-bottom: var(--space-6);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3) 0;
            border-bottom: 1px solid var(--border);
        }
        
        .summary-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: var(--text-lg);
            color: var(--primary);
            padding-top: var(--space-4);
        }
        
        .summary-label {
            color: var(--text-muted);
        }
        
        .summary-value {
            color: var(--text);
            font-weight: 500;
        }
        
        .checkout-section {
            margin-top: var(--space-6);
        }
        
        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--text);
            border: none;
            padding: var(--space-4) var(--space-6);
            border-radius: var(--radius-lg);
            font-size: var(--text-lg);
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-bottom: var(--space-4);
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg), var(--glow-primary);
        }
        
        .checkout-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .continue-shopping-btn {
            width: 100%;
            background: none;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-lg);
            font-size: var(--text-base);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .continue-shopping-btn:hover {
            background: var(--surface-light);
            border-color: var(--primary);
            color: var(--text);
        }
        
        .suggestions-section {
            margin-top: var(--space-16);
        }
        
        .suggestions-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }
        
        .suggestions-title {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-2);
        }
        
        .suggestions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-6);
        }
        
        .suggestion-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            overflow: hidden;
            transition: all var(--transition-normal);
            cursor: pointer;
        }
        
        .suggestion-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }
        
        .suggestion-image {
            height: 150px;
            background-size: cover;
            background-position: center;
        }
        
        .suggestion-content {
            padding: var(--space-4);
        }
        
        .suggestion-title {
            font-size: var(--text-base);
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-2);
        }
        
        .suggestion-price {
            font-size: var(--text-lg);
            font-weight: 700;
            color: var(--primary);
        }
        
        /* Mobile First Responsive Design */
        @media (max-width: 575px) {
            .cart-header {
                padding: 80px 0 40px;
            }
            
            .cart-title {
                font-size: var(--text-2xl);
            }
            
            .cart-subtitle {
                font-size: var(--text-base);
            }
            
            .cart-content {
                padding: var(--space-8) 0;
            }
            
            .cart-layout {
                grid-template-columns: 1fr;
                gap: var(--space-6);
            }
            
            .cart-items-section,
            .summary-card {
                padding: var(--space-4);
            }
            
            .cart-item {
                grid-template-columns: 1fr;
                gap: var(--space-3);
                padding: var(--space-3);
                text-align: center;
            }
            
            .item-image {
                width: 60px;
                height: 60px;
                margin: 0 auto var(--space-3);
                grid-column: 1;
                grid-row: 1;
            }
            
            .item-details {
                grid-column: 1;
                grid-row: 2;
                margin-bottom: var(--space-3);
            }
            
            .item-price {
                grid-column: 1;
                grid-row: 3;
                font-size: var(--text-xl);
                margin-bottom: var(--space-3);
            }
            
            .quantity-controls {
                grid-column: 1;
                grid-row: 4;
                justify-self: center;
                margin-bottom: var(--space-3);
            }
            
            .remove-btn {
                grid-column: 1;
                grid-row: 5;
                justify-self: center;
                padding: var(--space-2) var(--space-4);
                border-radius: var(--radius-lg);
                background: var(--surface-light);
                border: 1px solid var(--error);
            }
            
            .cart-summary {
                position: static;
            }
            
            .suggestions-grid {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }
            
            .empty-cart {
                padding: var(--space-8) var(--space-4);
            }
            
            .empty-cart i {
                font-size: 3rem;
            }
        }
        
        @media (min-width: 576px) and (max-width: 767px) {
            .cart-header {
                padding: 90px 0 50px;
            }
            
            .cart-layout {
                grid-template-columns: 1fr;
                gap: var(--space-8);
            }
            
            .cart-item {
                grid-template-columns: 70px 1fr auto auto;
                gap: var(--space-4);
                align-items: center;
            }
            
            .item-image {
                width: 70px;
                height: 70px;
            }
            
            .quantity-controls {
                grid-column: 3;
            }
            
            .remove-btn {
                grid-column: 4;
            }
            
            .suggestions-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 768px) and (max-width: 1023px) {
            .cart-layout {
                grid-template-columns: 1fr;
                gap: var(--space-10);
            }
            
            .cart-item {
                grid-template-columns: 80px 1fr auto auto;
                gap: var(--space-4);
            }
            
            .suggestions-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .cart-layout {
                grid-template-columns: 2fr 1fr;
            }
            
            .suggestions-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* Touch Optimizations */
        @media (hover: none) and (pointer: coarse) {
            .quantity-btn {
                width: 44px;
                height: 44px;
                font-size: var(--text-lg);
            }
            
            .remove-btn {
                padding: var(--space-3);
                min-width: 44px;
                min-height: 44px;
            }
            
            .checkout-btn {
                padding: var(--space-4) var(--space-6);
                font-size: var(--text-lg);
                min-height: 56px;
            }
            
            .continue-shopping-btn {
                padding: var(--space-4) var(--space-6);
                min-height: 48px;
            }
        }
        
        /* Landscape Mobile */
        @media (max-width: 767px) and (orientation: landscape) {
            .cart-header {
                padding: 60px 0 30px;
            }
            
            .cart-title {
                font-size: var(--text-xl);
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=80&h=80&fit=crop&crop=center" alt="College Canteen Logo" class="nav-logo">
                <span>College Canteen</span>
            </div>
            
            <ul class="nav-menu" id="navMenu">
                <li><a href="home.html" class="nav-link"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="canteens.html" class="nav-link"><i class="fas fa-utensils"></i> Canteens</a></li>
                <li><a href="track.html" class="nav-link"><i class="fas fa-truck"></i> Track Order</a></li>
                <li><a href="cart.html" class="nav-link active"><i class="fas fa-shopping-cart"></i> Cart <span class="cart-badge" id="cartCount">0</span></a></li>
                <li><a href="../dashboard/menu.html" class="nav-link"><i class="fas fa-cog"></i> Partner</a></li>
                <li><a href="#" id="logout-btn" class="nav-link"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
            
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <main>
        <section class="cart-header">
            <div class="container">
                <div class="cart-header-content">
                    <h1 class="cart-title">Smart Cart</h1>
                    <p class="cart-subtitle">Review your order and proceed to checkout</p>
                </div>
            </div>
        </section>

        <section class="cart-content">
            <div class="container">
                <div class="cart-layout">
                    <div class="cart-items-section">
                        <div class="cart-items-header">
                            <div>
                                <h2 style="color: var(--text); margin-bottom: var(--space-1);">Your Items</h2>
                                <span class="items-count" id="itemsCount">0 items in cart</span>
                            </div>
                            <button class="clear-cart-btn" id="clearCartBtn" style="display: none;">
                                <i class="fas fa-trash"></i> Clear Cart
                            </button>
                        </div>
                        
                        <div class="cart-items" id="cartItems">
                            <div class="empty-cart" id="emptyCart">
                                <i class="fas fa-shopping-cart"></i>
                                <h3>Your cart is empty</h3>
                                <p>Add some delicious items from our menu to get started!</p>
                                <button class="btn btn-primary" onclick="window.location.href='home.html'" style="margin-top: var(--space-4);">
                                    <i class="fas fa-utensils"></i> Browse Menu
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-card">
                            <div class="summary-header">
                                <h3 class="summary-title">Order Summary</h3>
                            </div>
                            
                            <div class="summary-items">
                                <div class="summary-item">
                                    <span class="summary-label">Subtotal</span>
                                    <span class="summary-value" id="subtotal">₹0</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Delivery Fee</span>
                                    <span class="summary-value" id="deliveryFee">₹20</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Tax</span>
                                    <span class="summary-value" id="tax">₹0</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="total">₹0</span>
                                </div>
                            </div>
                            
                            <div class="checkout-section">
                                <button class="checkout-btn" id="checkoutBtn" disabled>
                                    <i class="fas fa-credit-card"></i> Proceed to Checkout
                                </button>
                                <button class="continue-shopping-btn" onclick="window.location.href='home.html'">
                                    <i class="fas fa-arrow-left"></i> Continue Shopping
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="suggestions-section" id="suggestionsSection" style="display: none;">
            <div class="container">
                <div class="suggestions-header">
                    <h2 class="suggestions-title">You Might Also Like</h2>
                </div>
                
                <div class="suggestions-grid">
                    <div class="suggestion-card" onclick="addSuggestionToCart('7', 'Crispy Onion Rings', 90)">
                        <div class="suggestion-image" style="background-image: url('https://images.unsplash.com/photo-1639024471283-03518883512d?w=300&h=200&fit=crop&crop=center');"></div>
                        <div class="suggestion-content">
                            <h4 class="suggestion-title">Crispy Onion Rings</h4>
                            <p class="suggestion-price">₹90</p>
                        </div>
                    </div>
                    
                    <div class="suggestion-card" onclick="addSuggestionToCart('8', 'Classic Hot Dog', 130)">
                        <div class="suggestion-image" style="background-image: url('https://images.unsplash.com/photo-1612392062798-2dd3c8d2b9b0?w=300&h=200&fit=crop&crop=center');"></div>
                        <div class="suggestion-content">
                            <h4 class="suggestion-title">Classic Hot Dog</h4>
                            <p class="suggestion-price">₹130</p>
                        </div>
                    </div>
                    
                    <div class="suggestion-card" onclick="addSuggestionToCart('9', 'Garlic Bread', 100)">
                        <div class="suggestion-image" style="background-image: url('https://images.unsplash.com/photo-1573140247632-f8fd74997d5c?w=300&h=200&fit=crop&crop=center');"></div>
                        <div class="suggestion-content">
                            <h4 class="suggestion-title">Garlic Bread</h4>
                            <p class="suggestion-price">₹100</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer style="background: var(--surface); border-top: 1px solid var(--border); padding: var(--space-12) 0 var(--space-6);">
        <div class="container">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-8); margin-bottom: var(--space-8);">
                <div>
                    <h3 style="color: var(--text); margin-bottom: var(--space-4); font-family: var(--font-display);">College Canteen</h3>
                    <p style="color: var(--text-muted); margin-bottom: var(--space-4);">The future of campus dining, powered by AI and designed for students.</p>
                    <p style="color: var(--text-muted);">Contact: <a href="mailto:hello@collegecanteen.com" style="color: var(--primary);">hello@collegecanteen.com</a></p>
                </div>
                <div>
                    <h3 style="color: var(--text); margin-bottom: var(--space-4);">Quick Links</h3>
                    <div style="display: flex; flex-direction: column; gap: var(--space-2);">
                        <a href="home.html" style="color: var(--text-muted);">Home</a>
                        <a href="canteens.html" style="color: var(--text-muted);">Canteens</a>
                        <a href="track.html" style="color: var(--text-muted);">Track Order</a>
                    </div>
                </div>
            </div>
            <div style="text-align: center; padding-top: var(--space-6); border-top: 1px solid var(--border); color: var(--text-muted);">
                <p>© 2025 College Canteen. All rights reserved. Built with ❤️ for students.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Authentication check
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser || !currentUser.isLoggedIn) {
                window.location.href = '../auth/login.html';
                return;
            }

            // Initialize cart
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Food item images mapping
            const foodImages = {
                '1': 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=80&h=80&fit=crop&crop=center',
                '2': 'https://images.unsplash.com/photo-1576107232684-1279f390859f?w=80&h=80&fit=crop&crop=center',
                '3': 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=80&h=80&fit=crop&crop=center',
                '4': 'https://images.unsplash.com/photo-1527477396000-e27163b481c2?w=80&h=80&fit=crop&crop=center',
                '5': 'https://images.unsplash.com/photo-1562967914-608f82629710?w=80&h=80&fit=crop&crop=center',
                '6': 'https://images.unsplash.com/photo-1581636625402-29b2a704ef13?w=80&h=80&fit=crop&crop=center',
                '7': 'https://images.unsplash.com/photo-1639024471283-03518883512d?w=80&h=80&fit=crop&crop=center',
                '8': 'https://images.unsplash.com/photo-1612392062798-2dd3c8d2b9b0?w=80&h=80&fit=crop&crop=center',
                '9': 'https://images.unsplash.com/photo-1573140247632-f8fd74997d5c?w=80&h=80&fit=crop&crop=center'
            };

            // Mobile menu toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navMenu = document.getElementById('navMenu');
            
            mobileMenuToggle?.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                const icon = mobileMenuToggle.querySelector('i');
                icon.className = navMenu.classList.contains('active') ? 'fas fa-times' : 'fas fa-bars';
            });

            // Logout functionality
            document.getElementById('logout-btn')?.addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.removeItem('currentUser');
                window.location.href = '../auth/login.html';
            });

            // Clear cart functionality
            document.getElementById('clearCartBtn')?.addEventListener('click', () => {
                if (confirm('Are you sure you want to clear your cart?')) {
                    cart = [];
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                    showToast('Cart cleared successfully!', 'success');
                }
            });

            // Checkout functionality
            document.getElementById('checkoutBtn')?.addEventListener('click', () => {
                if (cart.length === 0) return;
                
                // Store order for tracking
                const order = {
                    id: 'ORD' + Date.now(),
                    items: [...cart],
                    total: calculateTotal(),
                    timestamp: new Date().toISOString(),
                    status: 'confirmed'
                };
                
                let orders = JSON.parse(localStorage.getItem('orders')) || [];
                orders.push(order);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Clear cart
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                
                showToast('Order placed successfully!', 'success');
                setTimeout(() => {
                    window.location.href = 'track.html';
                }, 2000);
            });

            function renderCart() {
                const cartItemsContainer = document.getElementById('cartItems');
                const emptyCart = document.getElementById('emptyCart');
                const clearCartBtn = document.getElementById('clearCartBtn');
                const checkoutBtn = document.getElementById('checkoutBtn');
                const suggestionsSection = document.getElementById('suggestionsSection');
                
                if (cart.length === 0) {
                    emptyCart.style.display = 'block';
                    clearCartBtn.style.display = 'none';
                    checkoutBtn.disabled = true;
                    suggestionsSection.style.display = 'none';
                    cartItemsContainer.innerHTML = '';
                    cartItemsContainer.appendChild(emptyCart);
                } else {
                    emptyCart.style.display = 'none';
                    clearCartBtn.style.display = 'block';
                    checkoutBtn.disabled = false;
                    suggestionsSection.style.display = 'block';
                    
                    cartItemsContainer.innerHTML = cart.map(item => `
                        <div class="cart-item">
                            <div class="item-image" style="background-image: url('${foodImages[item.id] || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=80&h=80&fit=crop&crop=center'}');"></div>
                            <div class="item-details">
                                <h3>${item.name}</h3>
                                <p>₹${item.price} each</p>
                            </div>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">-</button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">+</button>
                            </div>
                            <div class="item-price">₹${item.price * item.quantity}</div>
                            <button class="remove-btn" onclick="removeItem('${item.id}')" title="Remove item">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `).join('');
                }
                
                updateSummary();
                updateCartCount();
            }

            function updateSummary() {
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const deliveryFee = cart.length > 0 ? 20 : 0;
                const tax = Math.round(subtotal * 0.05);
                const total = subtotal + deliveryFee + tax;
                
                document.getElementById('subtotal').textContent = `₹${subtotal}`;
                document.getElementById('deliveryFee').textContent = `₹${deliveryFee}`;
                document.getElementById('tax').textContent = `₹${tax}`;
                document.getElementById('total').textContent = `₹${total}`;
                document.getElementById('itemsCount').textContent = `${cart.reduce((sum, item) => sum + item.quantity, 0)} items in cart`;
            }

            function updateCartCount() {
                const count = cart.reduce((total, item) => total + item.quantity, 0);
                const cartBadge = document.getElementById('cartCount');
                if (cartBadge) {
                    cartBadge.textContent = count;
                    cartBadge.style.display = count > 0 ? 'inline-block' : 'none';
                }
            }

            function calculateTotal() {
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const deliveryFee = cart.length > 0 ? 20 : 0;
                const tax = Math.round(subtotal * 0.05);
                return subtotal + deliveryFee + tax;
            }

            function showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `toast ${type} show`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }

            // Global functions for cart operations
            window.updateQuantity = (id, change) => {
                const item = cart.find(item => item.id === id);
                if (item) {
                    item.quantity += change;
                    if (item.quantity <= 0) {
                        cart = cart.filter(item => item.id !== id);
                    }
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                }
            };

            window.removeItem = (id) => {
                cart = cart.filter(item => item.id !== id);
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
                showToast('Item removed from cart', 'success');
            };

            window.addSuggestionToCart = (id, name, price) => {
                const existingItem = cart.find(item => item.id === id);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({ id, name, price, quantity: 1 });
                }
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
                showToast(`${name} added to cart!`, 'success');
            };

            // Initial render
            renderCart();
        });
    </script>
</body>
</html>